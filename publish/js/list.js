"use strict";!function(){var i,s,l=document.getElementById("product_wrap"),c=document.getElementById("pagination"),d=1,o=16;function e(a,t){xhr.get(xhr.baseUrl+"php/list.php?num="+a+"&page="+(t-1),function(t){i=t.data,s=Math.ceil(t.length/a),t.error||(function(){for(var t="",a=0;a<o;a++)t+='\n            <div class="col-lg-3 col-md-4 col-sm-6 col-xs-6">\n                <ul class="list-group">\n\n                </ul>\n            </div>\n            ';l.innerHTML=t;var e=document.querySelectorAll(".list-group");if(t="",d===s)for(var n=0;n<i.length%o;n++)t='\n                    <li class="list-group-item" detail-id="'+i[n].goods_id+'">\n                        <div>\n                            <p class="text-center">'+i[n].cat_three_id+'</p>\n                            <p class="picture"><img src="'+i[n].goods_small_logo+'" /></p>\n                            <p class="intro">'+i[n].goods_name+'</p>\n                            <p class="text-center">'+i[n].goods_price+'\n                            <a class="btn btn-default" href="./shoppingCart.html" role="button">购物车</a></p>\n                        </div>\n                    </li>\n                ',e[n].innerHTML=t;else for(var r=0;r<o;r++)t='\n                    <li class="list-group-item" detail-id="'+i[r].goods_id+'">\n                        <div>\n                            <p class="text-center">'+i[r].cat_three_id+'</p>\n                            <p class="picture"><img src="'+i[r].goods_small_logo+'" /></p>\n                            <p class="intro">'+i[r].goods_name+'</p>\n                            <p class="text-center">'+i[r].goods_price+'\n                            <a class="btn btn-default addToCart" role="button" data-id="'+i[r].goods_id+'">加进购物车</a></p>\n                        </div>\n                    </li>\n                ',e[r].innerHTML=t}(),function(){var t="";if(10<=s)if(6<d)if(c.innerHTML="",s<d+4)for(var a=s-10;a<s;a++)t+='<li><a href="#" data-bg="'+(a+1)+'">'+(a+1)+"</a></li>";else for(var e=d-6;e<d+4;e++)t+='<li><a href="#" data-bg="'+(e+1)+'">'+(e+1)+"</a></li>";else for(var n=1;n<=10;n++)t+='<li><a href="#" data-bg="'+n+'">'+n+"</a></li>";else for(var r=1;r<=s;r++)t+='<li><a href="#">'+r+"</a></li>";var i='\n            <li>\n                <a href="#" aria-label="Previous" class="leftBtn">\n                    <span aria-hidden="true" class="leftBtn">&laquo;</span>\n                </a>\n            </li>\n            '+t+'\n            <li>\n                <a href="#" aria-label="Next" class="rightBtn">\n                    <span aria-hidden="true" class="rightBtn">&raquo;</span>\n                </a>\n            </li>\n            <li><a href="#">45</a></li>\n            ';c.innerHTML=i;for(var l=c.getElementsByTagName("a"),o=0;o<l.length;o++)l[o].getAttribute("data-bg")==d&&(l[o].style.backgroundColor="#ddd")}())})}e(o,d),c.onclick=function(t){t.preventDefault();var a=t.target.className||"";"leftBtn"==a?1!=d&&d--:"rightBtn"==a?d!=s&&d++:(t=parseInt(t.target.innerHTML),d=t),e(o,d)},l.onclick=function(t){var a,e;"A"===t.target.tagName?(a=JSON.parse(localStorage.getItem("cart_info"))||{},e=t.target.getAttribute("data-id"),i.forEach(function(t){t.goods_id==e&&(a[e]||(a[e]=t),a[e].cart_number=parseInt(a[e].cart_number)+1,localStorage.setItem("cart_info",JSON.stringify(a)))})):(t=$(t).parents().prevObject[0].path,$.each(t,function(t,a){$(a).attr("detail-id")&&(location.href="./detail.html?detailID="+$(a).attr("detail-id"))}))}}();